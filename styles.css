/* Settings styles are bundled via main.ts import */

.ia-ribbon-chat-icon {
	color: var(--interactive-accent);
	transition: color 0.15s ease;
}

.ia-ribbon-chat-icon:hover {
	color: var(--interactive-accent-hover, var(--interactive-accent));
}

/* Intelligence Assistant Settings Refresh */
.ia-setting-label--required {
	position: relative;
	padding-right: 6px;
	font-weight: 600;
}

.ia-setting-label--required::after {
	content: '*';
	color: var(--text-error);
	margin-left: 4px;
	font-weight: 700;
	font-size: 0.9em;
}

.ia-section-description {
	margin: 0 0 12px 0;
	color: var(--text-muted);
	font-size: 13px;
	line-height: 1.5;
}

.ia-section-description--spaced {
	margin-bottom: 20px;
}

.ia-section-actions {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	margin-bottom: 12px;
	flex-wrap: wrap;
}

.ia-section-actions--wrap {
	justify-content: flex-start;
}

.ia-section-summary {
	display: flex;
	align-items: center;
	gap: 8px;
	font-size: 12px;
	color: var(--text-muted);
}

.ia-section-summary-pill {
	padding: 2px 8px;
	border-radius: 999px;
	background: var(--background-secondary);
	color: var(--text-muted);
	font-size: 11px;
	font-weight: 600;
}

.ia-empty-state {
	margin-top: 16px;
	padding: 24px;
	text-align: center;
	border-radius: 12px;
	border: 1px dashed var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-muted);
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.ia-toolbar {
	display: flex;
	gap: 10px;
	flex-wrap: wrap;
	margin-bottom: 14px;
}

.ia-button {
	padding: 6px 14px;
	border-radius: 8px;
	border: 1px solid transparent;
	font-size: 12px;
	font-weight: 600;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	transition: background 0.15s ease, color 0.15s ease, transform 0.15s ease, border-color 0.15s ease;
}

.ia-button:hover {
	background: var(--background-secondary-alt);
}

.ia-button:disabled {
	opacity: 0.6;
	cursor: not-allowed;
}

.ia-button--primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
	box-shadow: 0 6px 16px rgba(45, 105, 255, 0.25);
}

.ia-button--primary:hover {
	transform: translateY(-1px);
}

.ia-button--ghost {
	background: transparent;
	border-color: var(--background-modifier-border);
}

.ia-button--ghost:hover {
	border-color: var(--interactive-accent);
	color: var(--interactive-accent);
}

.ia-button--danger {
	background: rgba(255, 92, 87, 0.12);
	color: #ff5c57;
	border-color: rgba(255, 92, 87, 0.3);
}

.ia-button--danger:hover {
	background: rgba(255, 92, 87, 0.2);
}

.ia-button--success {
	background: rgba(76, 217, 100, 0.14);
	color: #2f9e44;
	border-color: rgba(76, 217, 100, 0.3);
}

.ia-button--success:hover {
	background: rgba(76, 217, 100, 0.22);
}

.ia-table-container {
	margin-top: 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	overflow: hidden;
	background: var(--background-primary);
	box-shadow: 0 12px 32px rgba(15, 23, 42, 0.08);
}

.ia-table {
	width: 100%;
	border-collapse: collapse;
	font-size: 13px;
}

.ia-table-head {
	background: linear-gradient(135deg, rgba(59, 130, 246, 0.06) 0%, rgba(147, 197, 253, 0.04) 100%);
}

.ia-table-header {
	padding: 12px 16px;
	text-align: left;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	font-size: 11px;
	font-weight: 700;
	color: var(--text-muted);
	border-bottom: 1px solid var(--background-modifier-border);
}

.ia-table-body tr {
	border-bottom: 1px solid var(--background-modifier-border);
	transition: background 0.2s ease;
}

.ia-table-body tr:last-child {
	border-bottom: none;
}

.ia-table-body tr:hover {
	background: var(--background-modifier-hover);
}

.ia-table-cell {
	padding: 12px 16px;
	vertical-align: top;
	color: var(--text-normal);
}

.ia-table-cell--center {
	text-align: center;
}

.ia-table-stack {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.ia-provider-header {
	display: flex;
	align-items: center;
	gap: 10px;
}

.ia-provider-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border-radius: 8px;
	background: linear-gradient(135deg, rgba(59, 130, 246, 0.18) 0%, rgba(59, 130, 246, 0.05) 100%);
	color: var(--interactive-accent);
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.ia-provider-icon svg {
	width: 16px;
	height: 16px;
}

.ia-provider-name {
	font-weight: 600;
	color: var(--text-normal);
}


.ia-filter-bar {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-left: auto;
	width: 100%;
	flex-wrap: nowrap;
}

.ia-filter-control {
	padding: 6px 10px;
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: 12px;
}

.ia-filter-control--compact {
	min-width: 120px;
}

.ia-filter-search {
	flex: 1 1 240px;
	min-width: 180px;
}

.ia-filter-control:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 1px var(--interactive-accent);
}

.ia-model-meta {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
	align-items: center;
}

.ia-model-meta-separator {
	color: var(--text-muted);
}

.ia-table-title {
	font-weight: 600;
	color: var(--text-normal);
}

.ia-table-subtext {
	font-size: 12px;
	color: var(--text-muted);
}

.ia-code {
	font-family: var(--font-monospace);
	font-size: 11px;
	color: var(--text-faint);
}

.ia-count-badge {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 32px;
	padding: 4px 10px;
	border-radius: 999px;
	background: var(--background-secondary);
	color: var(--text-muted);
	font-weight: 600;
}

.ia-status-badge {
	display: inline-flex;
	align-items: center;
	padding: 2px 10px;
	border-radius: 999px;
	font-size: 11px;
	font-weight: 600;
	text-transform: none;
}

.ia-status-badge.is-success {
	background: rgba(16, 185, 129, 0.18);
	color: #0f9d7a;
}

.ia-status-badge.is-danger {
	background: rgba(239, 68, 68, 0.18);
	color: #d63b3b;
}

.ia-status-badge.is-warning {
	background: rgba(250, 204, 21, 0.18);
	color: #a16207;
}

.ia-status-badge.is-info {
	background: rgba(59, 130, 246, 0.18);
	color: #2563eb;
}

.ia-table-actions {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
}

.ia-status {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 2px 10px;
	border-radius: 10px;
	background: var(--background-secondary);
	font-size: 12px;
	color: var(--text-muted);
}

.ia-status-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: var(--text-muted);
}

.ia-status-text {
	font-weight: 600;
}

.ia-status.is-success {
	background: rgba(34, 197, 94, 0.15);
	color: #15803d;
}

.ia-status.is-success .ia-status-dot {
	background: #16a34a;
}

.ia-status.is-warning {
	background: rgba(250, 204, 21, 0.18);
	color: #a16207;
}

.ia-status.is-warning .ia-status-dot {
	background: #fbbf24;
}

.ia-status.is-error {
	background: rgba(248, 113, 113, 0.18);
	color: #b91c1c;
}

.ia-status.is-error .ia-status-dot {
	background: #ef4444;
}

.ia-status.is-info {
	background: rgba(59, 130, 246, 0.18);
	color: #2563eb;
}

.ia-status.is-info .ia-status-dot {
	background: #3b82f6;
}

.ia-table-input {
	width: 100%;
	border: 1px solid transparent;
	background: transparent;
	font-size: 13px;
	color: var(--text-normal);
	padding: 4px 6px;
	border-radius: 6px;
	transition: border-color 0.15s ease, background 0.15s ease;
}

.ia-table-input:hover {
	background: var(--background-modifier-hover);
}

.ia-table-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
	background: rgba(59, 130, 246, 0.08);
	box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.12);
}

.ia-table-input--bold {
	font-weight: 600;
}

.ia-table-input--mono {
	font-family: var(--font-monospace);
	font-size: 12px;
}

.ia-table-badges {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
}

.ia-tag {
	display: inline-flex;
	align-items: center;
	padding: 3px 8px;
	border-radius: 999px;
	font-size: 11px;
	font-weight: 600;
	text-transform: none;
	background: var(--background-modifier-border);
	color: var(--text-normal);
}

.table-subtext {
	font-size: 12px;
	color: var(--text-muted);
}

/* Test Result Container */
.test-result-container {
	margin-top: 20px;
	padding: 16px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
}

.test-result-header {
	font-size: 14px;
	font-weight: 700;
	margin-bottom: 12px;
	display: flex;
	align-items: center;
	gap: 8px;
}

.test-result-content {
	white-space: pre-wrap;
	font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
	font-size: 12px;
	line-height: 1.6;
	padding: 12px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	max-height: 200px;
	overflow: auto;
	color: var(--text-normal);
}

.test-result-content::-webkit-scrollbar {
	width: 6px;
	height: 6px;
}

.test-result-content::-webkit-scrollbar-track {
	background: transparent;
}

.test-result-content::-webkit-scrollbar-thumb {
	background: var(--scrollbar-thumb-bg);
	border-radius: 3px;
}

.test-result-content::-webkit-scrollbar-thumb:hover {
	background: var(--scrollbar-active-thumb-bg);
}

/* Models Table Styles */
.models-table-container {
	width: 100%;
	overflow-x: auto;
	margin-top: 16px;
}

.models-table {
	width: 100%;
	border-collapse: collapse;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	overflow: hidden;
}

.models-table thead {
	background: var(--background-secondary);
	position: sticky;
	top: 0;
	z-index: 10;
}

.models-table th {
	padding: 12px 16px;
	text-align: left;
	font-size: 12px;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	border-bottom: 2px solid var(--background-modifier-border);
}

.models-table tbody tr {
	border-bottom: 1px solid var(--background-modifier-border);
	transition: background 0.15s ease;
}

.models-table tbody tr:hover {
	background: var(--background-secondary);
}

.models-table tbody tr:last-child {
	border-bottom: none;
}

.models-table td {
	padding: 12px 16px;
	font-size: 13px;
	color: var(--text-normal);
	vertical-align: middle;
}

.model-name-cell {
	font-weight: 600;
	color: var(--text-normal);
}

.model-id-subtext {
	display: block;
	font-size: 11px;
	font-weight: 400;
	color: var(--text-muted);
	margin-top: 2px;
}

.provider-badge {
	display: inline-block;
	padding: 4px 8px;
	font-size: 11px;
	font-weight: 600;
	border-radius: 4px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.model-type-badge {
	display: inline-block;
	padding: 4px 8px;
	font-size: 11px;
	font-weight: 500;
	border-radius: 4px;
	margin-right: 4px;
	background: var(--background-modifier-border);
	color: var(--text-normal);
}

.capabilities-cell {
	display: flex;
	flex-wrap: wrap;
	gap: 4px;
	align-items: center;
}

.capability-tag {
	display: inline-block;
	padding: 3px 6px;
	font-size: 10px;
	font-weight: 500;
	border-radius: 3px;
	background: var(--background-modifier-hover);
	color: var(--text-muted);
	border: 1px solid var(--background-modifier-border);
}

.model-toggle {
	width: 40px;
	height: 22px;
	position: relative;
	display: inline-block;
	cursor: pointer;
}

.model-toggle input {
	opacity: 0;
	width: 0;
	height: 0;
}

.model-toggle-slider {
	position: absolute;
	cursor: pointer;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: var(--background-modifier-border);
	transition: 0.3s;
	border-radius: 22px;
}

.model-toggle-slider:before {
	position: absolute;
	content: "";
	height: 16px;
	width: 16px;
	left: 3px;
	bottom: 3px;
	background-color: white;
	transition: 0.3s;
	border-radius: 50%;
}

.model-toggle input:checked + .model-toggle-slider {
	background-color: var(--interactive-accent);
}

.model-toggle input:checked + .model-toggle-slider:before {
	transform: translateX(18px);
}

.model-actions-cell {
	display: flex;
	gap: 6px;
	align-items: center;
}

.model-action-btn {
	padding: 6px 12px;
	font-size: 12px;
	font-weight: 500;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.15s ease;
	white-space: nowrap;
}

.model-action-btn:hover {
	background: var(--background-secondary);
	border-color: var(--interactive-accent);
}

.model-action-btn.is-default {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
	cursor: default;
}

.model-action-btn.is-default:hover {
	background: var(--interactive-accent);
	border-color: var(--interactive-accent);
}

/* Provider Table Styles */
.providers-table-container {
	width: 100%;
	overflow-x: auto;
	margin-top: 16px;
}

.providers-table {
	width: 100%;
	border-collapse: collapse;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	overflow: hidden;
}

.providers-table thead {
	background: var(--background-secondary);
}

.providers-table th {
	padding: 12px 16px;
	text-align: left;
	font-size: 12px;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	border-bottom: 2px solid var(--background-modifier-border);
}

.providers-table tbody tr {
	border-bottom: 1px solid var(--background-modifier-border);
	transition: background 0.15s ease;
	cursor: pointer;
}

.providers-table tbody tr:hover {
	background: var(--background-secondary);
}

.providers-table tbody tr:last-child {
	border-bottom: none;
}

.providers-table tbody tr.is-expanded {
	background: var(--background-secondary);
}

.providers-table td {
	padding: 12px 16px;
	font-size: 13px;
	color: var(--text-normal);
	vertical-align: middle;
}

.provider-name-cell {
	display: flex;
	align-items: center;
	gap: 8px;
	font-weight: 600;
}

.provider-expand-icon {
	font-size: 10px;
	color: var(--text-muted);
	transition: transform 0.2s ease;
}

.provider-expand-icon.is-expanded {
	transform: rotate(90deg);
}

.provider-status-badge {
	display: inline-block;
	padding: 4px 8px;
	font-size: 11px;
	font-weight: 500;
	border-radius: 4px;
}

.provider-status-badge.is-configured {
	background: #dcfce7;
	color: #166534;
}

.provider-status-badge.is-partial {
	background: #fef3c7;
	color: #92400e;
}

.provider-status-badge.is-unconfigured {
	background: #fee2e2;
	color: #991b1b;
}

.provider-actions-cell {
	display: flex;
	gap: 6px;
	align-items: center;
}

.provider-action-btn {
	padding: 6px 12px;
	font-size: 12px;
	font-weight: 500;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.15s ease;
	white-space: nowrap;
}

.provider-action-btn:hover {
	background: var(--background-secondary);
	border-color: var(--interactive-accent);
}

.provider-action-btn.mod-danger {
	color: #ef4444;
}

.provider-action-btn.mod-danger:hover {
	background: #fef2f2;
	border-color: #ef4444;
}

.provider-details-row {
	display: none;
}

.provider-details-row.is-visible {
	display: table-row;
}

.provider-details-cell {
	padding: 0 !important;
	background: var(--background-secondary);
}

.provider-details-content {
	padding: 20px 24px;
	border-top: 1px solid var(--background-modifier-border);
}

.provider-details-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
	gap: 16px;
}

/* Tools Table Styles */
.tools-table {
	width: 100%;
	border-collapse: collapse;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	overflow: hidden;
	margin-top: 16px;
}

.tools-table thead {
	background: var(--background-secondary);
	border-bottom: 2px solid var(--background-modifier-border);
}

.tools-table th {
	padding: 12px 16px;
	text-align: left;
	font-size: 12px;
	font-weight: 600;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.tools-table tbody tr {
	border-bottom: 1px solid var(--background-modifier-border);
	transition: background 0.15s ease;
}

.tools-table tbody tr:last-child {
	border-bottom: none;
}

.tools-table tbody tr:hover {
	background: var(--background-secondary);
}

.tools-table td {
	padding: 14px 16px;
	vertical-align: middle;
	font-size: 13px;
}

.tool-name-cell {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.tool-name-cell .tool-name {
	font-weight: 600;
	color: var(--text-normal);
	font-size: 13px;
}

.tool-name-cell .tool-description {
	font-size: 11px;
	color: var(--text-muted);
	line-height: 1.4;
}

.tool-tags-cell {
	display: flex;
	flex-wrap: wrap;
	gap: 4px;
}

.tool-tag {
	display: inline-block;
	padding: 3px 8px;
	background: var(--background-modifier-hover);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 10px;
	font-weight: 500;
	color: var(--text-normal);
	white-space: nowrap;
}

.tool-provider-badge {
	display: inline-block;
	padding: 4px 10px;
	background: var(--interactive-accent);
	color: white;
	border-radius: 4px;
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.3px;
}

.tool-toggle {
	width: 40px;
	height: 22px;
	position: relative;
	display: inline-block;
	cursor: pointer;
}

.tool-toggle input {
	opacity: 0;
	width: 0;
	height: 0;
}

.tool-toggle-slider {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: var(--background-modifier-border);
	border-radius: 22px;
	transition: 0.3s;
	cursor: pointer;
}

.tool-toggle-slider:before {
	position: absolute;
	content: "";
	height: 16px;
	width: 16px;
	left: 3px;
	bottom: 3px;
	background-color: white;
	border-radius: 50%;
	transition: 0.3s;
}

.tool-toggle input:checked + .tool-toggle-slider {
	background-color: var(--interactive-accent);
}

.tool-toggle input:checked + .tool-toggle-slider:before {
	transform: translateX(18px);
}

.tool-actions-cell {
	display: flex;
	gap: 8px;
	justify-content: flex-end;
}

.tool-action-btn {
	padding: 6px 12px;
	font-size: 11px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.15s ease;
	font-weight: 500;
}

.tool-action-btn:hover {
	background: var(--background-modifier-hover);
	border-color: var(--text-muted);
}

.tool-action-btn.is-danger {
	color: var(--text-error);
	border-color: var(--text-error);
}

.tool-action-btn.is-danger:hover {
	background: var(--text-error);
	color: white;
}
/* Enhanced expression helper styles */
.expression-helper-enhanced {
	font-size: 12px;
	color: #94a3b8;
	margin-top: 6px;
	margin-bottom: 12px;
	padding: 8px;
	background: rgba(255, 255, 255, 0.05);
	border-radius: 6px;
	border-left: 3px solid #4f46e5;
}

.expression-helper-buttons {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
	margin-bottom: 10px;
}

.quick-insert-btn {
	padding: 4px 10px;
	font-size: 11px;
	border: 1px solid #334155;
	background: rgba(255, 255, 255, 0.05);
	border-radius: 20px;
	cursor: pointer;
	margin: 2px;
	color: #cbd5e1;
	font-weight: 500;
	transition: all 0.2s ease;
}

.quick-insert-btn:hover {
	background: rgba(79, 70, 229, 0.2);
	border-color: #4f46e5;
	color: white;
	transform: translateY(-1px);
}

.expression-helper-container {
	margin-top: 18px;
	padding: 16px;
	border: 1px solid #334155;
	border-radius: 8px;
	background: rgba(0, 0, 0, 0.2);
	max-height: 320px;
	overflow-y: auto;
	box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.expression-function-row {
	display: flex;
	align-items: center;
	padding: 8px 12px;
	border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	transition: background 0.2s ease;
}

.expression-function-row:hover {
	background: rgba(255, 255, 255, 0.05);
}

.expression-function-row:last-child {
	border-bottom: none;
}

.function-name {
	font-weight: 600;
	margin-right: 10px;
	color: #60a5fa;
	min-width: 140px;
	font-size: 13px;
}

.function-signature {
	color: #94a3b8;
	font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
	font-size: 12px;
	flex: 1;
	background: rgba(0, 0, 0, 0.3);
	padding: 4px 8px;
	border-radius: 4px;
}

.expression-helper-close-btn {
	margin-top: 12px;
	padding: 6px 12px;
	font-size: 12px;
	border: 1px solid #334155;
	border-radius: 6px;
	background: rgba(255, 255, 255, 0.05);
	color: #cbd5e1;
	cursor: pointer;
	transition: all 0.2s ease;
}

.expression-helper-close-btn:hover {
	background: rgba(239, 68, 68, 0.2);
	border-color: #ef4444;
	color: white;
}

/* Enhanced Code Editor */
.enhanced-code-editor {
	font-family: 'Monaco', 'Menlo', 'Consolas', monospace !important;
	min-height: 180px;
	background: rgba(0, 0, 0, 0.2) !important;
	border: 1px solid #334155 !important;
	border-radius: 6px !important;
	padding: 12px !important;
	color: #e2e8f0 !important;
	font-size: 13px !important;
	line-height: 1.6 !important;
}

.enhanced-code-editor:focus {
	border-color: #4f46e5 !important;
	box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.3) !important;
}

/* Enhanced input validation states */
.config-panel-input.valid {
	border-color: #10b981 !important;
	background: rgba(16, 185, 129, 0.05) !important;
}

.config-panel-input.invalid {
	border-color: #ef4444 !important;
	background: rgba(239, 68, 68, 0.05) !important;
}

/* Chat Streaming Animations */
@keyframes typing {
	0%, 60%, 100% {
		opacity: 0.3;
		transform: translateY(0);
	}
	30% {
		opacity: 1;
		transform: translateY(-8px);
	}
}

@keyframes blink {
	0%, 49% { opacity: 1; }
	50%, 100% { opacity: 0; }
}

@keyframes ia-status-pulse {
	0% {
		opacity: 0.4;
		transform: scale(0.9);
	}
	50% {
		opacity: 1;
		transform: scale(1.2);
	}
	100% {
		opacity: 0.4;
		transform: scale(0.9);
	}
}

.thinking-indicator {
	padding: 8px 0;
}

.typing-dots {
	display: flex;
	gap: 4px;
	font-size: 16px;
}

.streaming-cursor {
	color: var(--text-accent);
	font-weight: bold;
	margin-left: 2px;
}

[data-message-status] {
	display: none;
	font-size: 10px;
	letter-spacing: 0.05em;
	text-transform: uppercase;
	color: var(--text-muted);
}

[data-message-status].is-visible {
	display: inline-flex;
	align-items: center;
	gap: 6px;
}

[data-message-status]::before {
	content: '';
	width: 6px;
	height: 6px;
	border-radius: 50%;
	background: currentColor;
}

[data-message-status][data-state="streaming"]::before {
	animation: ia-status-pulse 1.2s infinite;
	background: var(--text-accent);
}

[data-message-status][data-state="complete"] {
	color: var(--text-success);
}

[data-message-status][data-state="complete"]::before {
	background: var(--text-success);
	animation: none;
}

[data-message-status][data-state="error"],
[data-message-status].is-error {
	color: var(--text-error);
}

[data-message-status][data-state="error"]::before {
	background: var(--text-error);
	animation: none;
}

.stop-generation-btn {
	padding: 6px 16px;
	background: var(--interactive-accent);
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-size: 13px;
	font-weight: 500;
	transition: all 0.2s;
	display: flex;
	align-items: center;
	gap: 6px;
}

.stop-generation-btn:hover {
	background: var(--interactive-accent-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.stop-generation-btn:active {
	transform: translateY(0);
}

/* Message Actions */
.message-actions {
	display: flex;
	gap: 4px;
	opacity: 0;
	transition: opacity 0.2s;
	margin-top: 8px;
	pointer-events: none;
}

.chat-message:hover .message-actions,
.ia-chat-message:hover .message-actions {
	opacity: 1;
	pointer-events: auto;
}

.msg-action-btn {
	padding: 4px 8px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.2s;
	display: flex;
	align-items: center;
	gap: 4px;
	color: var(--text-muted);
}

.msg-action-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
	border-color: var(--text-accent);
	transform: translateY(-1px);
}

.msg-action-btn:active {
	transform: translateY(0);
}

.msg-action-btn svg {
	width: 16px;
	height: 16px;
}

/* RAG Sources Display */
.rag-sources-container {
	margin-top: 16px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
}

.rag-sources-header {
	font-size: 13px;
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 12px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.rag-sources-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
	gap: 12px;
}

.rag-source-card {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	transition: all 0.2s ease;
}

.rag-source-card:hover {
	background: var(--background-secondary-alt);
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.rag-source-header {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	margin-bottom: 8px;
	gap: 8px;
}

.rag-source-title {
	font-weight: 600;
	font-size: 13px;
	color: var(--text-normal);
	flex: 1;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.rag-source-similarity {
	font-size: 12px;
	font-weight: 700;
	padding: 2px 6px;
	background: var(--background-modifier-border);
	border-radius: 4px;
	flex-shrink: 0;
}

.rag-source-path {
	font-size: 11px;
	color: var(--text-muted);
	margin-bottom: 8px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.rag-source-content {
	font-size: 12px;
	color: var(--text-faint);
	line-height: 1.4;
	max-height: 60px;
	overflow: hidden;
	display: -webkit-box;
	-webkit-line-clamp: 3;
	-webkit-box-orient: vertical;
}

/* Enhanced RAG Settings Display */
.ia-rag-hero {
	display: flex;
	align-items: flex-start;
	gap: 16px;
	padding: 20px;
	border-radius: 16px;
	border: 1px solid var(--background-modifier-border);
	background: linear-gradient(135deg, var(--background-modifier-border) 0%, var(--background-secondary) 100%);
	box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
	margin-bottom: 20px;
	transition: all 0.3s ease;
	position: relative;
	overflow: hidden;
}

.ia-rag-hero::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: linear-gradient(90deg, var(--interactive-accent), var(--interactive-accent-hover), var(--interactive-accent));
}

.ia-rag-hero.is-disabled {
	opacity: 0.7;
	background: var(--background-secondary);
}

.ia-rag-hero-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 36px;
	height: 36px;
	border-radius: 12px;
	background: linear-gradient(135deg, var(--interactive-accent) 0%, var(--interactive-accent-hover) 100%);
	color: var(--text-on-accent);
	box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
	flex-shrink: 0;
}

.ia-rag-hero-icon svg {
	width: 18px;
	height: 18px;
}

.ia-rag-hero-body {
	display: flex;
	flex-direction: column;
	gap: 8px;
	flex: 1;
}

.ia-rag-hero-title {
	margin: 0;
	font-size: 18px;
	font-weight: 700;
	color: var(--text-normal);
}

.ia-rag-hero-text {
	margin: 0;
	color: var(--text-muted);
	line-height: 1.6;
	font-size: 14px;
}

.ia-rag-hero-meta {
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
	margin-top: 8px;
}

.ia-rag-pill {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 6px 12px;
	border-radius: 20px;
	background: var(--background-primary);
	color: var(--text-muted);
	font-size: 12px;
	font-weight: 600;
	text-transform: capitalize;
	border: 1px solid var(--background-modifier-border);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
}

.ia-rag-section {
	margin-top: 28px;
	display: flex;
	flex-direction: column;
	gap: 16px;
}

.ia-rag-section-header {
	display: flex;
	align-items: center;
	gap: 14px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.ia-rag-section-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border-radius: 10px;
	background: linear-gradient(135deg, var(--background-secondary) 0%, var(--background-primary) 100%);
	color: var(--interactive-accent);
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 2px 4px rgba(0, 0, 0, 0.03);
	flex-shrink: 0;
}

.ia-rag-section-icon svg {
	width: 14px;
	height: 14px;
}

.ia-rag-section-text {
	display: flex;
	flex-direction: column;
	gap: 4px;
	flex: 1;
}

.ia-rag-section-title {
	margin: 0;
	font-size: 16px;
	font-weight: 700;
	color: var(--text-normal);
	letter-spacing: -0.01em;
}

.ia-rag-section-subtitle {
	margin: 0;
	color: var(--text-muted);
	font-size: 13px;
	line-height: 1.5;
}

.ia-rag-card {
	padding: 20px;
	border-radius: 16px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	box-shadow: 0 6px 16px rgba(0, 0, 0, 0.04);
	display: flex;
	flex-direction: column;
	gap: 18px;
	transition: box-shadow 0.3s ease;
	position: relative;
	overflow: hidden;
}

.ia-rag-card:hover {
	box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
}

.ia-rag-card::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 1px;
	background: linear-gradient(90deg, transparent, var(--background-modifier-border), transparent);
}

.ia-rag-metric-grid {
	display: grid;
	gap: 14px;
	grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
	margin-bottom: 8px;
}

.ia-rag-metric {
	display: flex;
	align-items: center;
	gap: 14px;
	padding: 16px;
	border-radius: 12px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
	transition: all 0.3s ease;
}

.ia-rag-metric:hover {
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
	transform: translateY(-2px);
	border-color: var(--background-modifier-border-hover);
}

.ia-rag-metric-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 36px;
	height: 36px;
	border-radius: 12px;
	background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%);
	color: var(--interactive-accent);
	flex-shrink: 0;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
}

.ia-rag-metric-icon svg {
	width: 18px;
	height: 18px;
}

.ia-rag-metric-body {
	display: flex;
	flex-direction: column;
	gap: 3px;
	flex: 1;
}

.ia-rag-metric-label {
	font-size: 11px;
	letter-spacing: 0.05em;
	text-transform: uppercase;
	color: var(--text-muted);
	font-weight: 600;
	margin: 0;
}

.ia-rag-metric-value {
	font-size: 20px;
	font-weight: 700;
	color: var(--text-normal);
	margin: 0;
	letter-spacing: -0.01em;
}

.ia-rag-metric-note {
	font-size: 12px;
	color: var(--text-muted);
	line-height: 1.5;
	margin-top: 8px;
	padding-top: 8px;
	border-top: 1px dashed var(--background-modifier-border);
}

.ia-rag-actions {
	display: flex;
	flex-wrap: wrap;
	gap: 12px;
	padding-top: 8px;
	border-top: 1px solid var(--background-modifier-border);
	margin-top: 8px;
}

.ia-rag-file-list {
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	padding: 16px;
	background: var(--background-primary);
	display: flex;
	flex-direction: column;
	gap: 10px;
	box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
}

.ia-rag-file-list-title {
	font-size: 12px;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--text-muted);
	margin: 0 0 8px 0;
	display: flex;
	align-items: center;
	gap: 8px;
}

.ia-rag-file-list-items {
	margin: 0;
	padding: 0;
	list-style: none;
	display: flex;
	flex-direction: column;
	gap: 6px;
	font-size: 13px;
	color: var(--text-muted);
	max-height: 180px;
	overflow-y: auto;
	padding-right: 4px;
}

.ia-rag-file-list-items::-webkit-scrollbar {
	width: 6px;
}

.ia-rag-file-list-items::-webkit-scrollbar-track {
	background: var(--background-secondary);
	border-radius: 3px;
}

.ia-rag-file-list-items::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 3px;
}

.ia-rag-file-list-items::-webkit-scrollbar-thumb:hover {
	background: var(--background-modifier-border-hover);
}

.ia-rag-file-item {
	color: var(--text-normal);
	padding: 8px 10px;
	border-radius: 6px;
	background: var(--background-secondary);
	border-left: 2px solid var(--interactive-accent);
	transition: all 0.2s ease;
	font-size: 13px;
}

.ia-rag-file-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(2px);
}

/* Web Search Results Display */
.web-results-container {
	margin-top: 16px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
}

.web-results-header {
	font-size: 13px;
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 12px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.web-results-grid {
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.web-result-card {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	position: relative;
	transition: all 0.2s ease;
}

.web-result-card:hover {
	background: var(--background-secondary-alt);
	border-color: var(--interactive-accent);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.web-result-title-container {
	display: flex;
	align-items: flex-start;
	gap: 8px;
	margin-bottom: 6px;
}

.web-result-rank {
	font-size: 11px;
	font-weight: 700;
	color: var(--text-muted);
	background: var(--background-modifier-border);
	padding: 2px 6px;
	border-radius: 3px;
	flex-shrink: 0;
	min-width: 20px;
	text-align: center;
}

.web-result-title {
	font-size: 14px;
	font-weight: 600;
	color: var(--text-accent);
	text-decoration: none;
	flex: 1;
	line-height: 1.3;
}

.web-result-title:hover {
	text-decoration: underline;
}

.web-result-source {
	font-size: 11px;
	color: var(--text-success);
	margin-bottom: 8px;
	margin-left: 28px;
}

.web-result-snippet {
	font-size: 12px;
	color: var(--text-faint);
	line-height: 1.5;
	margin-left: 28px;
	margin-bottom: 8px;
}

.web-result-open-btn {
	position: absolute;
	top: 12px;
	right: 12px;
	padding: 6px;
	background: var(--background-modifier-border);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	opacity: 0.6;
	transition: all 0.2s ease;
}

.web-result-open-btn:hover {
	opacity: 1;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.web-result-open-btn svg {
	display: block;
}

/* Think/Reasoning Mode Badge */
.think-mode-badge {
	font-size: 11px;
	font-weight: 600;
	color: var(--text-accent);
	background: var(--background-modifier-border);
	padding: 3px 8px;
	border-radius: 4px;
	margin-left: 8px;
	display: inline-flex;
	align-items: center;
	gap: 4px;
}

/* Reasoning Content Display (DeepSeek R1) */
.reasoning-container {
	margin-top: 16px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
	border-left: 3px solid var(--text-accent);
}

.reasoning-header {
	font-size: 13px;
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 8px;
	display: flex;
	align-items: center;
	gap: 6px;
	user-select: none;
	transition: opacity 0.2s ease;
}

.reasoning-header:hover {
	opacity: 0.7;
}

.reasoning-content {
	font-size: 12px;
	color: var(--text-muted);
	line-height: 1.6;
	white-space: pre-wrap;
	font-family: var(--font-monospace);
	background: var(--background-primary);
	padding: 12px;
	border-radius: 6px;
	max-height: 400px;
	overflow-y: auto;
	border: 1px solid var(--background-modifier-border);
}

/* RAG Stats Modal */
.rag-stats-modal {
	max-width: 600px;
}

.rag-stats-summary {
	margin-bottom: 20px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.stat-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 8px 0;
	border-bottom: 1px solid var(--background-modifier-border);
}

.stat-row:last-child {
	border-bottom: none;
}

.stat-label {
	font-weight: 600;
	color: var(--text-normal);
}

.stat-value {
	font-weight: 700;
	color: var(--text-accent);
	font-size: 1.1em;
}

.rag-stats-files h4 {
	margin-bottom: 12px;
	color: var(--text-accent);
}

.rag-file-list {
	max-height: 300px;
	overflow-y: auto;
	padding: 8px;
	background: var(--background-secondary);
	border-radius: 6px;
}

.rag-file-item {
	padding: 8px;
	margin-bottom: 4px;
	background: var(--background-primary);
	border-radius: 4px;
	border-left: 3px solid var(--text-accent);
	display: flex;
	flex-direction: column;
	gap: 4px;
	transition: all 0.2s ease;
}

.rag-file-item:hover {
	background: var(--background-secondary-alt);
	transform: translateX(4px);
}

.rag-file-link {
	color: var(--text-accent);
	font-weight: 600;
	cursor: pointer;
	text-decoration: none;
	font-size: 13px;
}

.rag-file-link:hover {
	text-decoration: underline;
}

.rag-file-path {
	font-size: 11px;
	color: var(--text-muted);
	font-family: var(--font-monospace);
}

.rag-no-files {
	padding: 20px;
	text-align: center;
	color: var(--text-muted);
}

.rag-no-files p {
	margin-bottom: 12px;
}

.rag-no-files ol {
	text-align: left;
	display: inline-block;
	margin-top: 12px;
}

.modal-button-container {
	margin-top: 20px;
	text-align: right;
}

/* Enhanced Message Visual Distinction */
.chat-message,
.ia-chat-message {
	margin-bottom: 16px;
	padding: 12px;
	border-radius: 12px;
	transition: all 0.2s ease;
}

.ia-chat-message--streaming {
	border: 1px solid rgba(59, 130, 246, 0.4);
	box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.2), 0 4px 16px rgba(0, 0, 0, 0.1);
}

.message-user,
.ia-chat-message--user {
	background: var(--background-primary);
	border-left: 3px solid var(--interactive-accent);
}

.message-assistant,
.ia-chat-message--assistant {
	background: var(--background-secondary);
	border-left: 3px solid var(--text-accent);
}

.message-avatar {
	width: 36px;
	height: 36px;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
	color: white;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.message-avatar svg {
	fill: currentColor;
	color: white;
}

.ia-provider-avatar svg {
	width: 18px;
	height: 18px;
}

.ia-chat-message__model-label {
	font-weight: 600;
	color: var(--text-normal);
}

.ia-chat-copy-group {
	display: flex;
	gap: 4px;
	margin-left: auto;
}

.ia-chat-copy-btn {
	padding: 2px 8px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: transparent;
	color: var(--text-muted);
	font-size: 11px;
	cursor: pointer;
}

.ia-chat-copy-btn:hover:not(:disabled) {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

.ia-chat-copy-btn:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.ia-chat-message__footer,
.ia-chat-message__annotation {
	margin-top: 8px;
	padding-top: 6px;
	border-top: 1px dashed var(--background-modifier-border);
	font-size: 11px;
	color: var(--text-muted);
}

.message-row {
	display: flex;
	gap: 12px;
	align-items: flex-start;
}

.message-body {
	flex: 1;
	min-width: 0;
}

.message-meta {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 8px;
	flex-wrap: wrap;
}

.message-name {
	font-weight: 600;
	font-size: 14px;
}

.message-user .message-name {
	color: var(--interactive-accent);
}

.message-timestamp {
	font-size: 11px;
	color: var(--text-muted);
	margin-left: auto;
}

.message-content {
	line-height: 1.6;
	word-wrap: break-word;
}

.message-user .message-content {
	color: var(--text-normal);
}

.message-assistant .message-content {
	color: var(--text-normal);
}

/* Hover effect for messages */
.chat-message:hover,
.ia-chat-message:hover {
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Agent Execution Trace Styles */
.agent-execution-trace-container {
	margin-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
	padding-top: 16px;
}

.agent-execution-trace-header {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 10px 14px;
	background: var(--background-secondary);
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.2s ease;
	font-weight: 500;
	font-size: 13px;
}

.agent-execution-trace-header:hover {
	background: var(--background-modifier-hover);
	transform: translateY(-1px);
}

.agent-trace-icon {
	font-size: 12px;
	transition: transform 0.2s ease;
	color: var(--text-accent);
}

.agent-trace-title {
	flex: 1;
	color: var(--text-normal);
}

.agent-trace-count {
	font-size: 11px;
	padding: 2px 8px;
	background: var(--background-modifier-border);
	border-radius: 10px;
	color: var(--text-muted);
}

.agent-trace-status {
	margin-left: auto;
	font-size: 11px;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--text-faint);
}

.agent-trace-status[data-trace-status="running"],
.agent-trace-status[data-trace-status="thinking"] {
	color: var(--text-accent);
}

.agent-trace-status[data-trace-status="success"] {
	color: var(--text-success);
}

.agent-trace-status[data-trace-status="error"] {
	color: var(--text-error);
}

.agent-execution-trace-content {
	margin-top: 12px;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
	max-height: 600px;
	overflow-y: auto;
}

/* Agent Timeline */
.agent-execution-timeline {
	position: relative;
	padding-left: 40px;
}

.agent-execution-timeline::before {
	content: '';
	position: absolute;
	left: 16px;
	top: 0;
	bottom: 0;
	width: 2px;
	background: linear-gradient(to bottom,
		var(--text-accent) 0%,
		var(--background-modifier-border) 100%);
}

.agent-step {
	position: relative;
	margin-bottom: 24px;
	display: flex;
	gap: 12px;
}

.agent-step-indicator {
	position: absolute;
	left: -32px;
	top: 2px;
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--background-primary);
	border: 2px solid var(--background-modifier-border);
	border-radius: 50%;
	font-size: 16px;
	z-index: 1;
}

.agent-step-thought .agent-step-indicator {
	border-color: #9333EA;
	background: linear-gradient(135deg, #9333EA 0%, #c084fc 100%);
}

.agent-step-action .agent-step-indicator {
	border-color: #F59E0B;
	background: linear-gradient(135deg, #F59E0B 0%, #fbbf24 100%);
}

.agent-step-observation .agent-step-indicator {
	border-color: #10B981;
	background: linear-gradient(135deg, #10B981 0%, #34d399 100%);
}

.agent-step-content {
	flex: 1;
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 12px;
	border-left: 3px solid var(--background-modifier-border);
	transition: all 0.2s ease;
}

.agent-step--latest .agent-step-content {
	background: var(--background-primary);
	box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.15);
}

.agent-step-thought .agent-step-content {
	border-left-color: #9333EA;
}

.agent-step-action .agent-step-content {
	border-left-color: #F59E0B;
}

.agent-step-observation .agent-step-content {
	border-left-color: #10B981;
}

.agent-step-content:hover {
	background: var(--background-modifier-hover);
	transform: translateX(2px);
}

.agent-step-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 8px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.agent-step-type {
	font-weight: 600;
	font-size: 12px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.agent-step-thought .agent-step-type {
	color: #9333EA;
}

.agent-step-action .agent-step-type {
	color: #F59E0B;
}

.agent-step-observation .agent-step-type {
	color: #10B981;
}

.agent-step-time {
	font-size: 11px;
	color: var(--text-muted);
	font-family: var(--font-monospace);
}

.agent-step-body {
	font-size: 13px;
	line-height: 1.6;
	color: var(--text-normal);
}

.agent-step-body pre {
	background: var(--background-primary);
	padding: 8px;
	border-radius: 4px;
	font-size: 12px;
	overflow-x: auto;
	margin: 8px 0 0 0;
	border: 1px solid var(--background-modifier-border);
}

.agent-step-body strong {
	color: var(--text-accent);
	font-weight: 600;
}

.agent-step-status {
	margin-left: 8px;
	font-size: 10px;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	padding: 2px 8px;
	border-radius: 999px;
}

.agent-step-status--pending {
	background: var(--background-modifier-border);
	color: var(--text-muted);
}

.agent-step-status--success {
	background: rgba(16, 185, 129, 0.15);
	color: #10B981;
}

.agent-step-status--error {
	background: rgba(244, 63, 94, 0.15);
	color: var(--text-error);
}

/* Agent Final Answer */
.agent-final-answer {
	padding: 16px;
	background: linear-gradient(135deg,
		var(--background-secondary) 0%,
		var(--background-primary) 100%);
	border-radius: 8px;
	border: 2px solid var(--text-accent);
	margin-top: 16px;
}

.agent-final-answer h4 {
	margin: 0 0 12px 0;
	color: var(--text-accent);
	font-size: 14px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	display: flex;
	align-items: center;
	gap: 8px;
}

.agent-final-answer h4::before {
	content: 'âœ¨';
	font-size: 16px;
}

/* Provider Icon Styles */
.provider-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
	margin-right: 8px;
}

.provider-icon svg {
	width: 20px;
	height: 20px;
}

.provider-name-text {
	font-weight: 500;
}

/* ============================================
   Chat View Styles
   ============================================ */

.intelligence-assistant-chat-container {
	display: flex;
	flex-direction: column;
	height: 100%;
	padding: 0;
}

.chat-main-layout {
	display: flex;
	height: 100%;
	gap: 0;
	position: relative;
}

.conversation-list-floating {
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: 280px;
	background: var(--background-secondary);
	border-right: 1px solid var(--background-modifier-border);
	box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
	z-index: 100;
	display: flex;
	flex-direction: column;
}

.conversation-list-header {
	padding: 10px;
	border-bottom: 1px solid var(--background-modifier-border);
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.conversation-list-header h3 {
	margin: 0;
	font-size: 14px;
	font-weight: 600;
}

.conversation-header-buttons {
	display: flex;
	gap: 4px;
}

.pin-conversation-btn,
.new-conversation-btn {
	width: 24px;
	height: 24px;
	padding: 0;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 14px;
	line-height: 1;
}

.pin-conversation-btn:hover,
.new-conversation-btn:hover {
	background: var(--background-modifier-hover);
}

.conversation-list-content {
	flex: 1;
	overflow-y: auto;
}

.conversation-item {
	padding: 10px;
	border-bottom: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: background-color 0.1s;
}

.conversation-item:hover {
	background: var(--background-modifier-hover);
}

.conversation-item.active {
	background: var(--background-modifier-active-hover);
}

.conversation-title {
	font-size: 13px;
	color: var(--text-normal);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.main-chat-area {
	flex: 1;
	width: 100%;
	display: flex;
	flex-direction: column;
	padding: 10px;
}

.chat-header {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 10px 0;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 10px;
	flex-wrap: wrap;
}

.model-selector {
	display: flex;
	align-items: center;
	gap: 8px;
	flex: 1;
}

.model-selector select {
	flex: 1;
	min-width: 150px;
	padding: 6px 10px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-weight: 500;
}

.chat-messages {
	flex: 1;
	overflow-y: auto;
	padding: 12px 16px;
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.chat-message {
	display: flex;
	width: 100%;
}

.message-user .message-row {
	flex-direction: row-reverse;
}

.message-row {
	display: flex;
	gap: 10px;
	width: 100%;
	max-width: 100%;
}

.message-avatar {
	flex-shrink: 0;
	width: 28px;
	height: 28px;
	border-radius: 50%;
	background: var(--background-modifier-border);
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--text-muted);
}

.message-avatar svg {
	width: 16px;
	height: 16px;
}

.message-user .message-avatar {
	background: var(--interactive-accent);
	color: white;
}

.message-assistant .message-avatar {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
}

.message-tool {
	padding: 12px;
	margin: 12px 0;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
}

.tool-execution {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.tool-args {
	font-family: var(--font-monospace);
	font-size: 11px;
	color: var(--text-muted);
	white-space: pre;
	background: var(--background-secondary);
	padding: 8px;
	border-radius: 4px;
}

.tool-result {
	margin-top: 8px;
	padding: 8px;
	border-radius: 4px;
}

.tool-success {
	background: rgba(0, 255, 0, 0.1);
	border-left: 3px solid var(--text-success);
}

.tool-error {
	background: rgba(255, 0, 0, 0.1);
	border-left: 3px solid var(--text-error);
}

.tool-result pre {
	font-family: var(--font-monospace);
	font-size: 11px;
	margin: 4px 0 0 0;
	white-space: pre-wrap;
}

.message-body {
	flex: 1;
	min-width: 0;
}

.message-body,
.ia-chat-message__body,
.message-content,
.ia-chat-message__content {
	user-select: text;
}

.message-actions,
.message-actions *,
.ia-chat-message__actions,
.ia-chat-message__actions * {
	user-select: none;
}

.message-meta {
	display: flex;
	align-items: center;
	gap: 6px;
	flex-wrap: wrap;
	margin-bottom: 4px;
}

.message-name {
	font-weight: 600;
	font-size: 12px;
	color: var(--text-normal);
}

.ia-chat-message__badges {
	display: flex;
	flex-wrap: wrap;
	gap: 4px;
}

.ia-chat-message__badge {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 2px 8px;
	border-radius: 999px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	font-size: 10px;
	color: var(--text-muted);
}

.ia-chat-message__badge-label {
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.02em;
}

.ia-chat-message__badge-value {
	color: var(--text-normal);
}

.message-timestamp {
	font-size: 10px;
	color: var(--text-faint);
}

.message-actions {
	display: flex;
	gap: 2px;
	margin-top: 4px;
	opacity: 0;
	transition: opacity 0.15s;
}

.message-body:hover .message-actions {
	opacity: 1;
}

.msg-action-btn {
	padding: 3px 6px;
	border: none;
	background: transparent;
	color: var(--text-muted);
	cursor: pointer;
	border-radius: 3px;
	display: flex;
	align-items: center;
	gap: 2px;
	font-size: 11px;
	transition: all 0.15s;
}

.msg-action-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.msg-action-btn svg {
	width: 14px;
	height: 14px;
}

.message-content {
	line-height: 1.5;
	word-wrap: break-word;
	font-size: 13px;
	white-space: normal;
}

.message-content p {
	margin: 0.2em 0;
}

.message-content p:first-child {
	margin-top: 0;
}

.message-content p:last-child {
	margin-bottom: 0;
}

.message-content p:empty {
	display: none;
}

.message-content code {
	background: var(--background-primary);
	padding: 2px 6px;
	border-radius: 4px;
	font-family: var(--font-monospace);
	font-size: 0.9em;
}

.message-content pre {
	background: var(--background-primary);
	padding: 12px;
	border-radius: 6px;
	overflow-x: auto;
	margin: 8px 0;
}

.message-content pre code {
	background: none;
	padding: 0;
}

.message-content ul, .message-content ol {
	margin: 0.5em 0;
	padding-left: 1.5em;
}

.message-content blockquote {
	border-left: 3px solid var(--background-modifier-border);
	padding-left: 12px;
	margin: 8px 0;
	opacity: 0.8;
}

.message-attachments {
	margin-top: 6px;
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.attachment-item {
	padding: 6px;
	background: var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.85em;
}

.chat-input-container {
	margin-top: 12px;
	padding: 12px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 10px;
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.chat-input-header {
	display: flex;
	align-items: center;
	gap: 10px;
	flex-wrap: wrap;
}

.chat-top-controls,
.chat-action-row,
.chat-model-row,
.chat-token-row {
	display: flex;
	align-items: center;
	gap: 10px;
	flex-wrap: wrap;
	margin-bottom: 8px;
}

.chat-action-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 12px;
	margin: 6px 0 12px 0;
}

.chat-breadcrumb {
	display: flex;
	align-items: center;
	gap: 6px;
	font-size: 12px;
	color: var(--text-muted);
}

.chat-breadcrumb-link {
	color: var(--text-accent);
	font-weight: 600;
	cursor: pointer;
	background: transparent;
	border: none;
	padding: 0;
}

.chat-breadcrumb-link:hover {
	text-decoration: underline;
}

.chat-breadcrumb-current {
	font-weight: 600;
	color: var(--text-normal);
}

.chat-action-buttons {
	display: flex;
	align-items: center;
	gap: 6px;
}

.chat-action-btn {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 4px 8px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
	font-weight: 500;
	color: var(--text-muted);
	background: transparent;
	transition: all 0.15s ease;
}

.chat-action-btn:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

.chat-action-btn:active {
	background: var(--background-modifier-active-hover);
}

.chat-action-icon {
	display: flex;
	align-items: center;
	justify-content: center;
}

.chat-action-icon svg {
	width: 14px;
	height: 14px;
}

.chat-action-text {
	white-space: nowrap;
}

.chat-breadcrumb-link.chat-action-btn {
	color: var(--text-accent);
	font-weight: 600;
}

.chat-breadcrumb-link.chat-action-btn:hover {
	color: var(--text-accent-hover);
}

.chat-model-row {
	display: flex;
	flex-direction: column;
	gap: 8px;
	padding: 10px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 10px;
	background: var(--background-secondary);
}

.chat-model-controls {
	display: flex;
	flex-wrap: wrap;
	gap: 12px;
	align-items: center;
}

.chat-model-select {
	display: flex;
	flex: 1;
	align-items: center;
	gap: 8px;
}

.chat-model-select .chat-label {
	font-weight: 600;
}

.model-select {
	flex: 1;
	min-width: 160px;
	padding: 6px 10px;
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.chat-param-group {
	display: flex;
	align-items: center;
	gap: 8px;
}

.chat-agent-summary {
	display: none;
	flex-direction: column;
	gap: 6px;
	padding-top: 6px;
	border-top: 1px solid var(--background-modifier-border);
}

.chat-agent-summary-title {
	font-size: 12px;
	font-weight: 600;
	color: var(--text-muted);
}

.chat-agent-summary-details {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
	align-items: center;
}

.chat-agent-summary-text {
	font-size: 12px;
	color: var(--text-muted);
}

.chat-agent-chip {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 4px 10px;
	border-radius: 999px;
	border: 1px dashed var(--background-modifier-border);
	background: var(--background-primary);
	font-size: 12px;
	color: var(--text-muted);
}

.chat-agent-chip-label {
	font-weight: 600;
	color: var(--text-muted);
}

.chat-agent-chip-value {
	color: var(--text-normal);
}

.chat-label {
	font-size: 12px;
	color: var(--text-muted);
	font-weight: 600;
}

.chat-slider {
	width: 120px;
}

.chat-param-value {
	font-weight: 600;
	color: var(--text-accent);
}

.chat-number-input {
	width: 90px;
	padding: 4px 8px;
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.chat-token-row {
	justify-content: space-between;
}

.chat-token-chip {
	font-size: 11px;
	color: var(--text-muted);
	padding: 4px 10px;
	border-radius: 999px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.chat-select-group {
	display: flex;
	align-items: center;
	gap: 6px;
}

.chat-header-actions {
	display: flex;
	align-items: center;
	gap: 6px;
	flex-wrap: wrap;
	margin-left: auto;
}

.header-action-btn {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 4px 10px;
	border: 1px solid transparent;
	border-radius: 999px;
	background: var(--background-primary);
	font-size: 12px;
	color: var(--text-muted);
	cursor: pointer;
	transition: background 0.2s ease, color 0.2s ease, border 0.2s ease;
}

.header-action-btn:hover:not(.is-disabled) {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.header-action-btn.is-active {
	border-color: var(--interactive-accent);
	background: var(--interactive-accent);
	color: var(--background-primary);
}

.header-action-btn.is-disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.header-action-btn.is-link {
	border-style: dashed;
	background: transparent;
	color: var(--text-normal);
}

.header-action-icon {
	font-size: 12px;
	line-height: 1;
}

.header-action-status {
	font-size: 11px;
	color: var(--text-muted);
}

.chat-input-editor {
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	background: var(--background-primary);
	padding: 4px;
}

.chat-input-footer {
	padding-top: 4px;
}

.input-bottom-controls {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 10px;
	flex-wrap: wrap;
}

.bottom-left-controls {
	display: flex;
	align-items: center;
	gap: 6px;
	flex: 1;
	flex-wrap: wrap;
}

.bottom-middle-controls {
	display: flex;
	align-items: center;
	gap: 8px;
	flex: 1;
	flex-wrap: wrap;
}

.attachment-preview {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
	align-items: center;
}

.bottom-right-controls {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-left: auto;
}

.mode-selector,
.prompt-selector,
.agent-selector {
	padding: 5px 10px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 999px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 11px;
	cursor: pointer;
	min-width: 100px;
	transition: border-color 0.2s ease;
}

.mode-selector:focus,
.prompt-selector:focus,
.agent-selector:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px rgba(47, 194, 153, 0.15);
}

.toggle-btn {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 4px 10px;
	border-radius: 12px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-muted);
	cursor: pointer;
	font-size: 11px;
	transition: all 0.2s ease;
	outline: none;
}

.toggle-btn:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.toggle-btn.active {
	background: var(--interactive-accent);
	color: white;
	border-color: var(--interactive-accent);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.input-reference-area {
	flex: 1;
	display: flex;
	flex-wrap: wrap;
	gap: 4px;
	min-height: 28px;
	padding: 4px 6px;
	background: var(--background-primary);
	border: 1px dashed var(--background-modifier-border);
	border-radius: 8px;
	transition: border-color 0.2s ease;
}

.reference-list {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.reference-item {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 4px 8px;
	background: var(--background-secondary);
	border-radius: 4px;
	font-size: 12px;
}

.reference-icon {
	flex-shrink: 0;
}

.reference-path {
	flex: 1;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.reference-remove-btn {
	padding: 0 4px;
	border: none;
	background: transparent;
	color: var(--text-error);
	cursor: pointer;
	font-size: 16px;
	line-height: 1;
}

.reference-remove-btn:hover {
	background: var(--background-modifier-hover);
	border-radius: 2px;
}

.message-references {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
	margin-top: 8px;
}

.reference-badge {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 3px 8px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	font-size: 11px;
	color: var(--text-muted);
	transition: all 0.2s;
}

.reference-badge:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
	border-color: var(--interactive-accent);
}

.chat-input {
	width: 100%;
	min-height: 72px;
	max-height: 160px;
	padding: 14px 16px;
	border: 1px solid transparent;
	border-radius: 12px;
	background: var(--background-primary);
	color: var(--text-normal);
	resize: none;
	font-family: inherit;
	font-size: 13px;
	line-height: 1.6;
	outline: none;
	transition: border-color 0.2s, box-shadow 0.2s;
}

.chat-input:focus {
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 3px rgba(47, 194, 153, 0.15);
}

.chat-input::placeholder {
	color: var(--text-muted);
}

.attachment-preview-item {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 4px 8px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 11px;
}

.rag-sources-container {
	margin-top: 12px;
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
}

.rag-sources-header {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 8px;
	font-size: 12px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.rag-sources-grid {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.rag-source-card {
	padding: 10px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	transition: all 0.2s ease;
	cursor: pointer;
}

.rag-source-card:hover {
	border-color: var(--interactive-accent);
	background: var(--background-modifier-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.rag-source-header {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	margin-bottom: 6px;
}

.rag-source-title {
	font-weight: 600;
	font-size: 13px;
	color: var(--text-normal);
	flex: 1;
}

.rag-source-similarity {
	font-size: 11px;
	font-weight: 600;
	background: var(--background-primary);
	padding: 2px 6px;
	border-radius: 10px;
	min-width: 40px;
	text-align: center;
}

.rag-source-path {
	font-size: 11px;
	color: var(--text-muted);
	margin-bottom: 6px;
	word-break: break-all;
}

.rag-source-content {
	font-size: 12px;
	color: var(--text-muted);
	line-height: 1.4;
	background: var(--background-primary);
	padding: 8px;
	border-radius: 4px;
	border-left: 2px solid var(--interactive-accent);
}

.rag-source-content:hover {
	background: var(--background-secondary);
}

.stop-generation-btn {
	padding: 6px 12px;
	border-radius: 6px;
	border: 1px solid var(--text-error);
	background: rgba(255, 0, 0, 0.1);
	color: var(--text-error);
	font-size: 12px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s ease;
}

.stop-generation-btn:hover {
	background: var(--text-error);
	color: white;
}

@media (max-width: 720px) {
	.chat-input-container {
		padding: 12px;
	}
	.chat-input-footer {
		padding-top: 8px;
	}
	.input-bottom-controls {
		flex-direction: column;
		align-items: stretch;
	}
	.bottom-right-controls {
		margin-left: 0;
		justify-content: flex-start;
	}
}
